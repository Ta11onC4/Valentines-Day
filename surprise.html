<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Surprise üéÅ</title>
  <style>
    :root{
      --bg1:#fff0f5;
      --pink1:#ffccd9;
      --pink2:#ff99c8;
      --pink3:#ff4d94;
      --pink4:#ff1a75;
      --cream:#fff7fb;
      --wine:#800000;
      --cardShadow: 0 12px 25px rgba(0,0,0,0.14);
      --softBorder: 1px solid rgba(255,26,117,0.22);
    }

    body{
      margin:0;
      font-family: Arial, sans-serif;
      background: var(--bg1);
      color: var(--wine);
      text-align:center;
      overflow-x:hidden;
      padding-bottom: 80px; /* bottom nav */
    }

    header{
      padding: 20px 16px 10px;
    }

    header h1{
      margin: 0 0 8px;
      color: var(--pink3);
      letter-spacing: 0.2px;
    }

    header p{
      margin: 0;
      color:#9a0f2f;
      line-height: 1.35;
    }

    /* Page "dissolve" transition */
    .screen{
      min-height: calc(100vh - 80px);
      display:flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 16px;
      padding: 10px 14px 24px;
      opacity: 1;
      transition: opacity 700ms ease, filter 700ms ease, transform 700ms ease;
    }

    .screen.hidden{
      display:none;
    }

    .screen.fade-out{
      opacity: 0;
      filter: blur(10px);
      transform: scale(0.98);
      pointer-events:none;
    }

    .card{
      width: min(520px, 92vw);
      background: rgba(255,255,255,0.6);
      border: var(--softBorder);
      border-radius: 18px;
      box-shadow: var(--cardShadow);
      padding: 18px 14px;
      backdrop-filter: blur(6px);
    }

    .question{
      font-size: 1.25rem;
      font-weight: bold;
      color:#7a0012;
      margin: 0 0 14px;
    }

    .choices{
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 6px;
    }

    .choice{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      padding: 12px 12px;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(255,204,217,0.65), rgba(255,153,200,0.50));
      border: 1px solid rgba(255,77,148,0.22);
      cursor: pointer;
      user-select:none;
      transition: transform 120ms ease, box-shadow 120ms ease;
    }

    .choice:active{ transform: scale(0.99); }
    .choice:hover{ box-shadow: 0 10px 18px rgba(0,0,0,0.10); }

    .choice-left{
      display:flex;
      align-items:center;
      gap: 10px;
      text-align:left;
      min-width: 0;
    }

    .choice-title{
      font-weight: bold;
      color:#7a0012;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .fake-checkbox{
      width: 24px;
      height: 24px;
      border-radius: 7px;
      background: rgba(255,255,255,0.75);
      border: 2px solid rgba(255,26,117,0.30);
      display:flex;
      align-items:center;
      justify-content:center;
      flex: 0 0 auto;
      font-size: 1rem;
      color: white;
    }

    .choice.selected .fake-checkbox{
      background: linear-gradient(135deg, var(--pink3), var(--pink4));
      border-color: rgba(255,26,117,0.40);
    }

    .choice-note{
      font-size: 0.9rem;
      color:#9a0f2f;
      margin-top: 10px;
      line-height: 1.35;
    }

    /* NO screen */
    .no-face{
      font-size: 5rem;
      margin: 0;
    }
    .no-text{
      font-size: 1.8rem;
      font-weight: bold;
      margin: 0;
      color:#7a0012;
    }
    .no-sub{
      margin: 0;
      color:#9a0f2f;
      line-height: 1.35;
    }
    .funny-btn{
      margin-top: 10px;
      border: none;
      background: linear-gradient(135deg, var(--pink3), var(--pink4));
      color: white;
      padding: 12px 14px;
      border-radius: 14px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 10px 18px rgba(255,26,117,0.20);
      transition: transform 120ms ease, filter 120ms ease;
      min-width: 180px;
    }
    .funny-btn:active{ transform: scale(0.98); }
    .funny-btn:hover{ filter: brightness(1.05); }

    /* LOCK screen */
    .lock-title{
      font-size: 1.2rem;
      font-weight: bold;
      color:#7a0012;
      margin: 0 0 6px;
    }
    .lock-hint{
      margin: 0 0 14px;
      color:#9a0f2f;
      line-height: 1.35;
    }

    .password-wrap{
      display:flex;
      gap: 8px;
      justify-content:center;
      align-items:center;
      flex-wrap: wrap;
      margin-top: 6px;
    }

    .password-input{
      width: min(280px, 75vw);
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,26,117,0.25);
      outline: none;
      font-size: 1rem;
      background: rgba(255,255,255,0.85);
    }

    .unlock-btn{
      border: none;
      background: linear-gradient(135deg, var(--pink3), var(--pink4));
      color: white;
      padding: 12px 14px;
      border-radius: 14px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 10px 18px rgba(255,26,117,0.20);
      transition: transform 120ms ease, filter 120ms ease;
      min-width: 110px;
    }
    .unlock-btn:active{ transform: scale(0.98); }
    .unlock-btn:hover{ filter: brightness(1.05); }

    .error{
      margin: 12px 0 0;
      color: #b00020;
      font-weight: bold;
      display:none;
    }

    /* REVEAL */
    .reveal{
      margin-top: 14px;
      display:none;
      text-align:left;
      padding: 14px;
      border-radius: 16px;
      background: rgba(255,255,255,0.75);
      border: 1px solid rgba(255,26,117,0.18);
    }
    .reveal h3{
      margin: 0 0 8px;
      color:#7a0012;
    }
    .reveal p{
      margin: 6px 0;
      color:#9a0f2f;
      line-height: 1.35;
    }

    /* Confetti canvas */
    .confetti{
      position: fixed;
      inset: 0;
      pointer-events:none;
      z-index: 2000;
      display:none;
    }

    /* Bottom nav */
    .bottom-nav{
      position: fixed;
      bottom: 0;
      width: 100%;
      background: #ffe6f0;
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      box-shadow: 0 -2px 5px rgba(0,0,0,0.2);
      z-index: 1000;
    }

    .bottom-nav a{
      text-decoration: none;
      color: var(--wine);
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>
    <h1>Surprise</h1>
    <p>One last thing‚Ä¶ üíñ</p>
  </header>

  <!-- Confetti -->
  <canvas id="confetti" class="confetti"></canvas>

  <!-- SCREEN 1: Question -->
  <section id="screenAsk" class="screen">
    <div class="card">
      <div class="question">Will you be my Valentine?</div>

      <div class="choices">
        <div class="choice" id="choiceYes" role="button" tabindex="0">
          <div class="choice-left">
            <div class="fake-checkbox" aria-hidden="true"></div>
            <div class="choice-title">Yes</div>
          </div>
        </div>

        <div class="choice" id="choiceNo" role="button" tabindex="0">
          <div class="choice-left">
            <div class="fake-checkbox" aria-hidden="true"></div>
            <div class="choice-title">No</div>
          </div>
        </div>
      </div>

      <div class="choice-note">Choose carefully‚Ä¶ this is a very important question üòÑ</div>
    </div>
  </section>

  <!-- SCREEN 2: NO -->
  <section id="screenNo" class="screen hidden">
    <div class="card">
      <p class="no-face">‚òπÔ∏è</p>
      <p class="no-text">Aw man</p>
      <p class="no-sub" id="noSub">I‚Äôm gonna pretend I didn‚Äôt see that üòÖ</p>
      <button class="funny-btn" id="tryAgainBtn">Okay okay, try again</button>
    </div>
  </section>

  <!-- SCREEN 3: LOCK -->
  <section id="screenLock" class="screen hidden">
    <div class="card">
      <p class="lock-title">Locked Surprise üîí</p>
      <p class="lock-hint">Hint: our anniversary date (type it exactly)</p>

      <div class="password-wrap">
        <input
          class="password-input"
          id="password"
          type="password"
          placeholder="Enter the password‚Ä¶"
          autocomplete="off"
        />
        <button class="unlock-btn" id="unlockBtn">Unlock</button>
      </div>

      <p class="error" id="errorMsg">Nope üòÖ try again (hint: anniversary date)</p>

      <div class="reveal" id="revealBox">
        <h3>Our Date Info üíñ</h3>
        <p><strong>Anniversary:</strong> <span id="annivOut">[set this]</span></p>
        <p><strong>Tonight‚Äôs plan:</strong> <span id="planOut">[set this]</span></p>
        <p><strong>Message:</strong> <span id="msgOut">[set this]</span></p>
      </div>
    </div>
  </section>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <a href="index.html">üè† Home</a>
    <a href="memories.html">üì∏ Memories</a>
    <a href="love.html">üíñ Love</a>
    <a href="music.html">üéµ Music</a>
    <a href="surprise.html">üéÅ Surprise</a>
  </nav>

  <script>
    // ===========================
    // ‚úÖ EDIT THESE VALUES
    // ===========================
    // Password is whatever you want her to type.
    // Example formats: "06/12/2016" or "06122016" or "June 12"
    const CORRECT_PASSWORD = "06/12/2016";

    // What shows after she unlocks:
    const ANNIVERSARY_TEXT = "06/12/2016";
    const PLAN_TEXT = "Dinner + dessert + a movie together";
    const MESSAGE_TEXT = "I love you more than words. Happy Valentine‚Äôs Day ‚ù§Ô∏è";
    // ===========================

    const screenAsk = document.getElementById("screenAsk");
    const screenNo = document.getElementById("screenNo");
    const screenLock = document.getElementById("screenLock");

    const choiceYes = document.getElementById("choiceYes");
    const choiceNo = document.getElementById("choiceNo");

    const tryAgainBtn = document.getElementById("tryAgainBtn");
    const noSub = document.getElementById("noSub");

    const password = document.getElementById("password");
    const unlockBtn = document.getElementById("unlockBtn");
    const errorMsg = document.getElementById("errorMsg");
    const revealBox = document.getElementById("revealBox");

    const annivOut = document.getElementById("annivOut");
    const planOut = document.getElementById("planOut");
    const msgOut = document.getElementById("msgOut");

    const confettiCanvas = document.getElementById("confetti");
    const ctx = confettiCanvas.getContext("2d");

    function resizeConfetti(){
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeConfetti);
    resizeConfetti();

    function dissolveTo(fromEl, toEl){
      fromEl.classList.add("fade-out");
      setTimeout(() => {
        fromEl.classList.add("hidden");
        fromEl.classList.remove("fade-out");
        toEl.classList.remove("hidden");
      }, 720);
    }

    function setSelected(which){
      // Clear both
      choiceYes.classList.remove("selected");
      choiceNo.classList.remove("selected");
      choiceYes.querySelector(".fake-checkbox").textContent = "";
      choiceNo.querySelector(".fake-checkbox").textContent = "";

      // Set selected
      which.classList.add("selected");
      which.querySelector(".fake-checkbox").textContent = "‚úì";
    }

    // --- YES path ---
    function handleYes(){
      setSelected(choiceYes);
      // dissolve to lock screen
      setTimeout(() => dissolveTo(screenAsk, screenLock), 200);
      // focus password after transition
      setTimeout(() => password.focus(), 950);
    }

    // --- NO path ---
    function handleNo(){
      setSelected(choiceNo);
      setTimeout(() => dissolveTo(screenAsk, screenNo), 200);
    }

    choiceYes.addEventListener("click", handleYes);
    choiceNo.addEventListener("click", handleNo);

    // keyboard support
    choiceYes.addEventListener("keydown", (e) => { if(e.key === "Enter" || e.key === " ") handleYes(); });
    choiceNo.addEventListener("keydown", (e) => { if(e.key === "Enter" || e.key === " ") handleNo(); });

    // Funny NO button: cycles messages
    const funnyLines = [
      "I‚Äôm gonna pretend I didn‚Äôt see that üòÖ",
      "Wrong button, ma‚Äôam üòÇ",
      "That button is broken‚Ä¶ try the other one üòá",
      "This page is now sad. Very sad. ‚òπÔ∏è",
      "Okay okay‚Ä¶ I forgive you. Try again üíñ"
    ];
    let funnyIndex = 0;

    tryAgainBtn.addEventListener("click", () => {
      funnyIndex = (funnyIndex + 1) % funnyLines.length;
      noSub.textContent = funnyLines[funnyIndex];

      // Send back to question after a couple clicks
      if (funnyIndex === 0) {
        // gentle dissolve back
        dissolveTo(screenNo, screenAsk);
        // clear selection
        setTimeout(() => {
          choiceYes.classList.remove("selected");
          choiceNo.classList.remove("selected");
          choiceYes.querySelector(".fake-checkbox").textContent = "";
          choiceNo.querySelector(".fake-checkbox").textContent = "";
        }, 800);
      }
    });

    // Unlock logic
    function normalize(s){
      return (s || "").trim();
    }

    function doUnlock(){
      const entered = normalize(password.value);
      if (entered === normalize(CORRECT_PASSWORD)) {
        errorMsg.style.display = "none";

        // Fill reveal content
        annivOut.textContent = ANNIVERSARY_TEXT;
        planOut.textContent = PLAN_TEXT;
        msgOut.textContent = MESSAGE_TEXT;

        // Reveal + confetti
        revealBox.style.display = "block";
        launchConfetti();
      } else {
        errorMsg.style.display = "block";
        revealBox.style.display = "none";
        // little shake effect
        password.animate(
          [
            { transform: "translateX(0px)" },
            { transform: "translateX(-8px)" },
            { transform: "translateX(8px)" },
            { transform: "translateX(-6px)" },
            { transform: "translateX(6px)" },
            { transform: "translateX(0px)" },
          ],
          { duration: 420, easing: "ease-in-out" }
        );
      }
    }

    unlockBtn.addEventListener("click", doUnlock);
    password.addEventListener("keydown", (e) => {
      if (e.key === "Enter") doUnlock();
    });

    // Confetti (simple + pretty)
    let confettiPieces = [];
    let confettiTimer = null;

    function launchConfetti(){
      confettiCanvas.style.display = "block";
      confettiPieces = [];
      const colors = ["#ff4d94", "#ff1a75", "#ffffff", "#ffd1e6", "#ff99c8"];

      const count = 180;
      for (let i = 0; i < count; i++){
        confettiPieces.push({
          x: Math.random() * confettiCanvas.width,
          y: -20 - Math.random() * confettiCanvas.height * 0.3,
          w: 6 + Math.random() * 8,
          h: 8 + Math.random() * 10,
          color: colors[Math.floor(Math.random() * colors.length)],
          vx: (Math.random() - 0.5) * 2,
          vy: 2 + Math.random() * 4,
          rot: Math.random() * Math.PI,
          vr: (Math.random() - 0.5) * 0.2
        });
      }

      const start = performance.now();
      const duration = 2200;

      function frame(t){
        const elapsed = t - start;
        ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);

        confettiPieces.forEach(p => {
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;

          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillStyle = p.color;
          ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
          ctx.restore();
        });

        // keep drawing
        if (elapsed < duration){
          requestAnimationFrame(frame);
        } else {
          ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
          confettiCanvas.style.display = "none";
        }
      }
      requestAnimationFrame(frame);
    }
  </script>
</body>
</html>
